## LINE Bot（Message API）の準備

### Messaging APIの登録

[LINE Developersコンソールでチャネルを作成する](https://developers.line.me/ja/docs/messaging-api/getting-started/) の、`1. LINE Developersコンソールにログインする` 〜 `5. チャネルを確認する` までの手順を行う。

原則、画像の通りに進めてもらってかまわないが、補足を以下に記載する。

- もし、画面が英語で表示されてしまう場合は、画面右下の言語設定を `English` から `日本語` に切り替える。  
  **⚠️ ブラウザの翻訳は使わないこと**: ブラウザの翻訳機能を使うと、設定に使う文字列など、本来翻訳すべきではない部分も変わってしまう。
  
- `1. LINE Developersコンソールにログインする` では、それぞれのLINEのアカウントでログインする。
- `2. 開発者として登録する（初回ログイン時のみ）`  では、それぞれのニックネームやメールアドレス（学生の場合は、自身の大学メールアドレス）を入力する。
- `3. 新規プロバイダーを作成する` では、プロパイダー名は任意の（好きな）名前を入力する。
- `4. チャネルを作成する` では...
  - Channel Type（チャンネルの種類）が `Messaging API` になっていることを確認する。
  - `任意` と書かれている項目は空欄でよい。
  - チャンネル名や説明は、個人情報ではない、何か好きなものを入力する。
  - 大業種は `個人` 、小業種は  `個人（IT・コンピュータ）` や `個人（学生）` などを自分の立場にあわせて選ぶ。 
  - アイコン画像も自分の好きなものを利用してよいが、[いらすとや](http://www.irasutoya.com/)の素材を使わせてもらうのもよい。

### Messaging APIの設定

[LINE Developersコンソール](https://developers.line.biz/console/) のプロパイダーの欄から、あなたが作成したプロパイダー名 → あなたが作成したチャンネル名 の順に選択する。

チャンネルを開き、`Messaging API設定` のタブを開く。

- **WebHookURL** を、 ngrokで取得した `https://xxxxxxxx.ngrok.io/callback` に変更する（xxxxxxxxは各自のものを使う）
- **Webhookの利用** を、選択状態（緑色）にスイッチする。
- **応答メッセージ** の `編集` を選ぶと、 **応答設定** のウィンドウが開く。
  - `応答メッセージ` を `オフ` にする
  - `あいさつメッセージ` を `オフ` にする
  - `Webhook` は、 **`オン` のまま** にする（間違えないように！）
  - ここまで設定したら、**応答設定** のウィンドウを閉じる。
- **チャネルアクセストークン（長期）** の `発行` ボタンを押す。

に変更する。（各設定項目の **更新ボタン押し忘れ**に注意)

#### その他

このMessage APIの設定画面は今後もよく使うので、ブラウザのタブなどで開いたままにしておくと便利。


![設定画面例](fig03a.png)

----

[戻る](../../README.md)